Return-Path: <v9fs-developer-bounces@lists.sourceforge.net>
X-Original-To: lists+v9fs-developer@lfdr.de
Delivered-To: lists+v9fs-developer@lfdr.de
Received: from lists.sourceforge.net (lists.sourceforge.net [216.105.38.7])
	by mail.lfdr.de (Postfix) with ESMTPS id 8C91F7261D
	for <lists+v9fs-developer@lfdr.de>; Wed, 24 Jul 2019 06:25:48 +0200 (CEST)
Received: from [127.0.0.1] (helo=sfs-ml-1.v29.lw.sourceforge.com)
	by sfs-ml-1.v29.lw.sourceforge.com with esmtp (Exim 4.90_1)
	(envelope-from <v9fs-developer-bounces@lists.sourceforge.net>)
	id 1hq8qX-0000hC-Ot; Wed, 24 Jul 2019 04:25:45 +0000
Received: from [172.30.20.202] (helo=mx.sourceforge.net)
 by sfs-ml-1.v29.lw.sourceforge.com with esmtps
 (TLSv1.2:ECDHE-RSA-AES256-GCM-SHA384:256) (Exim 4.90_1)
 (envelope-from <john.hubbard@gmail.com>) id 1hq8qV-0000gs-Dn
 for v9fs-developer@lists.sourceforge.net; Wed, 24 Jul 2019 04:25:43 +0000
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
 d=sourceforge.net; s=x; h=Content-Transfer-Encoding:Content-Type:MIME-Version
 :References:In-Reply-To:Message-Id:Date:Subject:Cc:To:From:Sender:Reply-To:
 Content-ID:Content-Description:Resent-Date:Resent-From:Resent-Sender:
 Resent-To:Resent-Cc:Resent-Message-ID:List-Id:List-Help:List-Unsubscribe:
 List-Subscribe:List-Post:List-Owner:List-Archive;
 bh=O+df2I4TC5wSBN7Em5oodjAicQ0h4N55TIXEwhFfOE8=; b=NxBNgtbXx7oCZ23W7FnQUwd2uk
 keaMT2mVH5nen+1MLzK33Rg3irzK4krhl5XkdTqCYuVq87mhSnSAbSiAnJcg7hSZ9RYkoyv9rJ/Dm
 vTXU6g/aD5juYEAQzch1wecXyoXA1yLjbao7JQYLBwjU6eDmIEEdYSuckk+7GKbAKWLU=;
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d=sf.net; s=x
 ;
 h=Content-Transfer-Encoding:Content-Type:MIME-Version:References:
 In-Reply-To:Message-Id:Date:Subject:Cc:To:From:Sender:Reply-To:Content-ID:
 Content-Description:Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc
 :Resent-Message-ID:List-Id:List-Help:List-Unsubscribe:List-Subscribe:
 List-Post:List-Owner:List-Archive;
 bh=O+df2I4TC5wSBN7Em5oodjAicQ0h4N55TIXEwhFfOE8=; b=cM9qv2lMArWGk1FrFV80WGMLnY
 KzVqQVtAh/eQ6Syhw6U4MJHiDH4I3R6V8ou5RXgBLFG//ZuBW/f/+uKhqJcHvPhbbv/rl50a051Sr
 qAjVEzLB34UQQIVk0qBZ4VCLv/T4fDN0Wfpymy9Q0RKrEWEOrKGnxpQ8ODRGIOtFvdsc=;
Received: from mail-pg1-f196.google.com ([209.85.215.196])
 by sfi-mx-1.v28.lw.sourceforge.com with esmtps
 (TLSv1.2:ECDHE-RSA-AES128-GCM-SHA256:128) (Exim 4.90_1)
 id 1hq8qS-00FRUf-3V
 for v9fs-developer@lists.sourceforge.net; Wed, 24 Jul 2019 04:25:43 +0000
Received: by mail-pg1-f196.google.com with SMTP id o13so20495845pgp.12
 for <v9fs-developer@lists.sourceforge.net>;
 Tue, 23 Jul 2019 21:25:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=O+df2I4TC5wSBN7Em5oodjAicQ0h4N55TIXEwhFfOE8=;
 b=dT/q1EiIaZOtDdL3HV/QOzHzsDHfdLExn0xz4e9uVNKqEUH1JPdJd8CuNeW8B/wxSe
 uVovaNDsULEFnzgjkLvzzmokCVO++hnkf5KmdsGeROd1Zl7OxAF1TJ6k4W3ZltfNSNzJ
 BEl5n6nZLhGNy0bQqdCPtgnUqKrkFQ4zYMsaZbX9RQNSqSiltrmZvWMpRLjx7ScpS3eM
 klezQZVLZFX/jERYm+o8MnnWWHew0e2Yh6imZT7Cp1CTuM7HqL88XzFBNHAgj8Opq+Cg
 IFLb/mOFgqGRQ8epFvAEHa2kjJnPTABX27HKV6/WBPLTwIXLB/v/JUKm6klwQGVw8iie
 cq9Q==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=O+df2I4TC5wSBN7Em5oodjAicQ0h4N55TIXEwhFfOE8=;
 b=FPFbEfMvTIkqHG9JTWK7akhJ89raLHpaLt8qE5Cy67JLyGKShrY295rdAURnXhqn5s
 UQKaSSxa7++xUySs1j5PQqdTgbQuCM6sdQw62VFBsyd7D8mIOtBB21BsBF0BQKIpc+CV
 mWbqdWWsUhpveDa57t2lZib5gh2DZLhuGiMY1TOdzIg6/wFSAmi4hRyGvbpBEkZ5LnQB
 Jh7iuPwoSCyhMwuNvQBBzNepvJVsOKGtPDcVwNnYTplt76H0/6vBBhhdb1OOCiKRpIBD
 02BBmQxwHtqvS10em4zfnASUjgwkbAoBnAzrFrBiPM4gsLhhSzHbipEvBCKVoM50/ez/
 bmKQ==
X-Gm-Message-State: APjAAAWpg8g0LRKcKDjeYjKm7g6fBemjW64qGgjthMZrzxRyfqFzzV2H
 Sn0C+VAoFvE/cp3V6x5vz5k=
X-Google-Smtp-Source: APXvYqyvgCv1eDp6dy773mz9vUzmLnKPDzcw6J3eIwRmKYsm312digfMgY//0G6lCk4CuS5A+gszrw==
X-Received: by 2002:a17:90a:384d:: with SMTP id
 l13mr1798787pjf.86.1563942334345; 
 Tue, 23 Jul 2019 21:25:34 -0700 (PDT)
Received: from blueforge.nvidia.com (searspoint.nvidia.com. [216.228.112.21])
 by smtp.gmail.com with ESMTPSA id
 a15sm34153364pgw.3.2019.07.23.21.25.32
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Tue, 23 Jul 2019 21:25:33 -0700 (PDT)
From: john.hubbard@gmail.com
X-Google-Original-From: jhubbard@nvidia.com
To: Andrew Morton <akpm@linux-foundation.org>
Date: Tue, 23 Jul 2019 21:25:15 -0700
Message-Id: <20190724042518.14363-10-jhubbard@nvidia.com>
X-Mailer: git-send-email 2.22.0
In-Reply-To: <20190724042518.14363-1-jhubbard@nvidia.com>
References: <20190724042518.14363-1-jhubbard@nvidia.com>
MIME-Version: 1.0
X-NVConfidentiality: public
X-Spam-Score: -0.2 (/)
X-Spam-Report: Spam Filtering performed by mx.sourceforge.net.
 See http://spamassassin.org/tag/ for more details.
 0.0 URIBL_BLOCKED ADMINISTRATOR NOTICE: The query to URIBL was blocked.
 See
 http://wiki.apache.org/spamassassin/DnsBlocklists#dnsbl-block
 for more information. [URIs: nvidia.com]
 -0.0 RCVD_IN_DNSWL_NONE     RBL: Sender listed at https://www.dnswl.org/, no
 trust [209.85.215.196 listed in list.dnswl.org]
 0.0 RCVD_IN_MSPIKE_H3      RBL: Good reputation (+3)
 [209.85.215.196 listed in wl.mailspike.net]
 0.0 FREEMAIL_FROM Sender email is commonly abused enduser mail provider
 (john.hubbard[at]gmail.com)
 -0.0 SPF_PASS               SPF: sender matches SPF record
 0.0 SPF_HELO_NONE          SPF: HELO does not publish an SPF Record
 -0.1 DKIM_VALID_AU Message has a valid DKIM or DK signature from author's
 domain
 -0.1 DKIM_VALID Message has at least one valid DKIM or DK signature
 0.1 DKIM_SIGNED            Message has a DKIM or DK signature,
 not necessarily valid
 0.0 RCVD_IN_MSPIKE_WL      Mailspike good senders
 -0.1 AWL AWL: Adjusted score from AWL reputation of From: address
X-Headers-End: 1hq8qS-00FRUf-3V
Subject: [V9fs-developer] [PATCH 09/12] fs/fuse: convert put_page() to
 put_user_page*()
X-BeenThere: v9fs-developer@lists.sourceforge.net
X-Mailman-Version: 2.1.21
Precedence: list
List-Id: <v9fs-developer.lists.sourceforge.net>
List-Unsubscribe: <https://lists.sourceforge.net/lists/options/v9fs-developer>, 
 <mailto:v9fs-developer-request@lists.sourceforge.net?subject=unsubscribe>
List-Archive: <http://sourceforge.net/mailarchive/forum.php?forum_name=v9fs-developer>
List-Post: <mailto:v9fs-developer@lists.sourceforge.net>
List-Help: <mailto:v9fs-developer-request@lists.sourceforge.net?subject=help>
List-Subscribe: <https://lists.sourceforge.net/lists/listinfo/v9fs-developer>, 
 <mailto:v9fs-developer-request@lists.sourceforge.net?subject=subscribe>
Cc: Latchesar Ionkov <lucho@ionkov.net>, Boaz Harrosh <boaz@plexistor.com>,
 Jan Kara <jack@suse.cz>, kvm@vger.kernel.org,
 "Michael S . Tsirkin" <mst@redhat.com>, Dave Chinner <david@fromorbit.com>,
 virtualization@lists.linux-foundation.org, linux-mm@kvack.org,
 Christoph Hellwig <hch@lst.de>, linux-cifs@vger.kernel.org,
 Miklos Szeredi <miklos@szeredi.hu>, linux-rdma@vger.kernel.org,
 Matthew Wilcox <willy@infradead.org>, Jason Gunthorpe <jgg@ziepe.ca>,
 Johannes Thumshirn <jthumshirn@suse.de>, v9fs-developer@lists.sourceforge.net,
 Jason Wang <jasowang@redhat.com>, Eric Van Hensbergen <ericvh@gmail.com>,
 John Hubbard <jhubbard@nvidia.com>, Dan Williams <dan.j.williams@intel.com>,
 Ming Lei <ming.lei@redhat.com>, linux-block@vger.kernel.org,
 =?UTF-8?q?J=C3=A9r=C3=B4me=20Glisse?= <jglisse@redhat.com>,
 Alexander Viro <viro@zeniv.linux.org.uk>, ceph-devel@vger.kernel.org,
 Trond Myklebust <trond.myklebust@hammerspace.com>,
 Jens Axboe <axboe@kernel.dk>, linux-nfs@vger.kernel.org,
 netdev@vger.kernel.org, samba-technical@lists.samba.org,
 LKML <linux-kernel@vger.kernel.org>, "David S . Miller" <davem@davemloft.net>,
 linux-fsdevel@vger.kernel.org, Anna Schumaker <anna.schumaker@netapp.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: v9fs-developer-bounces@lists.sourceforge.net

RnJvbTogSsOpcsO0bWUgR2xpc3NlIDxqZ2xpc3NlQHJlZGhhdC5jb20+CgpGb3IgcGFnZXMgdGhh
dCB3ZXJlIHJldGFpbmVkIHZpYSBnZXRfdXNlcl9wYWdlcyooKSwgcmVsZWFzZSB0aG9zZSBwYWdl
cwp2aWEgdGhlIG5ldyBwdXRfdXNlcl9wYWdlKigpIHJvdXRpbmVzLCBpbnN0ZWFkIG9mIHZpYSBw
dXRfcGFnZSgpLgoKVGhpcyBpcyBwYXJ0IGEgdHJlZS13aWRlIGNvbnZlcnNpb24sIGFzIGRlc2Ny
aWJlZCBpbiBjb21taXQgZmMxZDhlN2NjYTJkCigibW06IGludHJvZHVjZSBwdXRfdXNlcl9wYWdl
KigpLCBwbGFjZWhvbGRlciB2ZXJzaW9ucyIpLgoKQ2hhbmdlcyBmcm9tIErDqXLDtG1lJ3Mgb3Jp
Z2luYWwgcGF0Y2g6CgoqIFVzZSB0aGUgZW5oYW5jZWQgcHV0X3VzZXJfcGFnZXNfZGlydHlfbG9j
aygpLgoKU2lnbmVkLW9mZi1ieTogSsOpcsO0bWUgR2xpc3NlIDxqZ2xpc3NlQHJlZGhhdC5jb20+
ClNpZ25lZC1vZmYtYnk6IEpvaG4gSHViYmFyZCA8amh1YmJhcmRAbnZpZGlhLmNvbT4KQ2M6IGxp
bnV4LWZzZGV2ZWxAdmdlci5rZXJuZWwub3JnCkNjOiBsaW51eC1ibG9ja0B2Z2VyLmtlcm5lbC5v
cmcKQ2M6IGxpbnV4LW1tQGt2YWNrLm9yZwpDYzogSmFuIEthcmEgPGphY2tAc3VzZS5jej4KQ2M6
IERhbiBXaWxsaWFtcyA8ZGFuLmoud2lsbGlhbXNAaW50ZWwuY29tPgpDYzogQWxleGFuZGVyIFZp
cm8gPHZpcm9AemVuaXYubGludXgub3JnLnVrPgpDYzogSm9oYW5uZXMgVGh1bXNoaXJuIDxqdGh1
bXNoaXJuQHN1c2UuZGU+CkNjOiBDaHJpc3RvcGggSGVsbHdpZyA8aGNoQGxzdC5kZT4KQ2M6IEpl
bnMgQXhib2UgPGF4Ym9lQGtlcm5lbC5kaz4KQ2M6IE1pbmcgTGVpIDxtaW5nLmxlaUByZWRoYXQu
Y29tPgpDYzogRGF2ZSBDaGlubmVyIDxkYXZpZEBmcm9tb3JiaXQuY29tPgpDYzogSmFzb24gR3Vu
dGhvcnBlIDxqZ2dAemllcGUuY2E+CkNjOiBNYXR0aGV3IFdpbGNveCA8d2lsbHlAaW5mcmFkZWFk
Lm9yZz4KQ2M6IEJvYXogSGFycm9zaCA8Ym9hekBwbGV4aXN0b3IuY29tPgpDYzogTWlrbG9zIFN6
ZXJlZGkgPG1pa2xvc0BzemVyZWRpLmh1PgotLS0KIGZzL2Z1c2UvZGV2LmMgIHwgMjIgKysrKysr
KysrKysrKysrKystLS0tCiBmcy9mdXNlL2ZpbGUuYyB8IDUzICsrKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysrKystLS0tLS0tLS0tLS0tCiAyIGZpbGVzIGNoYW5nZWQsIDU3IGluc2Vy
dGlvbnMoKyksIDE4IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2ZzL2Z1c2UvZGV2LmMgYi9m
cy9mdXNlL2Rldi5jCmluZGV4IGVhODIzNzUxM2RmYS4uOGVmNjVjOWNkM2Y2IDEwMDY0NAotLS0g
YS9mcy9mdXNlL2Rldi5jCisrKyBiL2ZzL2Z1c2UvZGV2LmMKQEAgLTc4MCw2ICs3ODAsNyBAQCBz
dHJ1Y3QgZnVzZV9jb3B5X3N0YXRlIHsKIAl1bnNpZ25lZCBsZW47CiAJdW5zaWduZWQgb2Zmc2V0
OwogCXVuc2lnbmVkIG1vdmVfcGFnZXM6MTsKKwlib29sIGZyb21fZ3VwOwogfTsKIAogc3RhdGlj
IHZvaWQgZnVzZV9jb3B5X2luaXQoc3RydWN0IGZ1c2VfY29weV9zdGF0ZSAqY3MsIGludCB3cml0
ZSwKQEAgLTgwMCwxMyArODAxLDIyIEBAIHN0YXRpYyB2b2lkIGZ1c2VfY29weV9maW5pc2goc3Ry
dWN0IGZ1c2VfY29weV9zdGF0ZSAqY3MpCiAJCQlidWYtPmxlbiA9IFBBR0VfU0laRSAtIGNzLT5s
ZW47CiAJCWNzLT5jdXJyYnVmID0gTlVMTDsKIAl9IGVsc2UgaWYgKGNzLT5wZykgewotCQlpZiAo
Y3MtPndyaXRlKSB7Ci0JCQlmbHVzaF9kY2FjaGVfcGFnZShjcy0+cGcpOwotCQkJc2V0X3BhZ2Vf
ZGlydHlfbG9jayhjcy0+cGcpOworCQlpZiAoY3MtPmZyb21fZ3VwKSB7CisJCQlpZiAoY3MtPndy
aXRlKSB7CisJCQkJZmx1c2hfZGNhY2hlX3BhZ2UoY3MtPnBnKTsKKwkJCQlwdXRfdXNlcl9wYWdl
c19kaXJ0eV9sb2NrKCZjcy0+cGcsIDEsIHRydWUpOworCQkJfSBlbHNlCisJCQkJcHV0X3VzZXJf
cGFnZShjcy0+cGcpOworCQl9IGVsc2UgeworCQkJaWYgKGNzLT53cml0ZSkgeworCQkJCWZsdXNo
X2RjYWNoZV9wYWdlKGNzLT5wZyk7CisJCQkJc2V0X3BhZ2VfZGlydHlfbG9jayhjcy0+cGcpOwor
CQkJfQorCQkJcHV0X3BhZ2UoY3MtPnBnKTsKIAkJfQotCQlwdXRfcGFnZShjcy0+cGcpOwogCX0K
IAljcy0+cGcgPSBOVUxMOworCWNzLT5mcm9tX2d1cCA9IGZhbHNlOwogfQogCiAvKgpAQCAtODM0
LDYgKzg0NCw3IEBAIHN0YXRpYyBpbnQgZnVzZV9jb3B5X2ZpbGwoc3RydWN0IGZ1c2VfY29weV9z
dGF0ZSAqY3MpCiAJCQlCVUdfT04oIWNzLT5ucl9zZWdzKTsKIAkJCWNzLT5jdXJyYnVmID0gYnVm
OwogCQkJY3MtPnBnID0gYnVmLT5wYWdlOworCQkJY3MtPmZyb21fZ3VwID0gZmFsc2U7CiAJCQlj
cy0+b2Zmc2V0ID0gYnVmLT5vZmZzZXQ7CiAJCQljcy0+bGVuID0gYnVmLT5sZW47CiAJCQljcy0+
cGlwZWJ1ZnMrKzsKQEAgLTg1MSw2ICs4NjIsNyBAQCBzdGF0aWMgaW50IGZ1c2VfY29weV9maWxs
KHN0cnVjdCBmdXNlX2NvcHlfc3RhdGUgKmNzKQogCQkJYnVmLT5sZW4gPSAwOwogCiAJCQljcy0+
Y3VycmJ1ZiA9IGJ1ZjsKKwkJCWNzLT5mcm9tX2d1cCA9IGZhbHNlOwogCQkJY3MtPnBnID0gcGFn
ZTsKIAkJCWNzLT5vZmZzZXQgPSAwOwogCQkJY3MtPmxlbiA9IFBBR0VfU0laRTsKQEAgLTg2Niw2
ICs4NzgsNyBAQCBzdGF0aWMgaW50IGZ1c2VfY29weV9maWxsKHN0cnVjdCBmdXNlX2NvcHlfc3Rh
dGUgKmNzKQogCQljcy0+bGVuID0gZXJyOwogCQljcy0+b2Zmc2V0ID0gb2ZmOwogCQljcy0+cGcg
PSBwYWdlOworCQljcy0+ZnJvbV9ndXAgPSBpb3ZfaXRlcl9nZXRfcGFnZXNfdXNlX2d1cChjcy0+
aXRlcik7CiAJCWlvdl9pdGVyX2FkdmFuY2UoY3MtPml0ZXIsIGVycik7CiAJfQogCkBAIC0xMDAw
LDYgKzEwMTMsNyBAQCBzdGF0aWMgaW50IGZ1c2VfdHJ5X21vdmVfcGFnZShzdHJ1Y3QgZnVzZV9j
b3B5X3N0YXRlICpjcywgc3RydWN0IHBhZ2UgKipwYWdlcCkKIAl1bmxvY2tfcGFnZShuZXdwYWdl
KTsKIG91dF9mYWxsYmFjazoKIAljcy0+cGcgPSBidWYtPnBhZ2U7CisJY3MtPmZyb21fZ3VwID0g
ZmFsc2U7CiAJY3MtPm9mZnNldCA9IGJ1Zi0+b2Zmc2V0OwogCiAJZXJyID0gbG9ja19yZXF1ZXN0
KGNzLT5yZXEpOwpkaWZmIC0tZ2l0IGEvZnMvZnVzZS9maWxlLmMgYi9mcy9mdXNlL2ZpbGUuYwpp
bmRleCA1YWUyODI4YmViMDAuLmMzNGMyMmFjNWIyMiAxMDA2NDQKLS0tIGEvZnMvZnVzZS9maWxl
LmMKKysrIGIvZnMvZnVzZS9maWxlLmMKQEAgLTU0MywxMiArNTQzLDIwIEBAIHZvaWQgZnVzZV9y
ZWFkX2ZpbGwoc3RydWN0IGZ1c2VfcmVxICpyZXEsIHN0cnVjdCBmaWxlICpmaWxlLCBsb2ZmX3Qg
cG9zLAogCXJlcS0+b3V0LmFyZ3NbMF0uc2l6ZSA9IGNvdW50OwogfQogCi1zdGF0aWMgdm9pZCBm
dXNlX3JlbGVhc2VfdXNlcl9wYWdlcyhzdHJ1Y3QgZnVzZV9yZXEgKnJlcSwgYm9vbCBzaG91bGRf
ZGlydHkpCitzdGF0aWMgdm9pZCBmdXNlX3JlbGVhc2VfdXNlcl9wYWdlcyhzdHJ1Y3QgZnVzZV9y
ZXEgKnJlcSwgYm9vbCBzaG91bGRfZGlydHksCisJCQkJICAgIGJvb2wgZnJvbV9ndXApCiB7CiAJ
dW5zaWduZWQgaTsKIAorCWlmIChmcm9tX2d1cCkgeworCQlwdXRfdXNlcl9wYWdlc19kaXJ0eV9s
b2NrKHJlcS0+cGFnZXMsIHJlcS0+bnVtX3BhZ2VzLAorCQkJCQkgIHNob3VsZF9kaXJ0eSk7CisJ
CXJldHVybjsKKwl9CisKIAlmb3IgKGkgPSAwOyBpIDwgcmVxLT5udW1fcGFnZXM7IGkrKykgewog
CQlzdHJ1Y3QgcGFnZSAqcGFnZSA9IHJlcS0+cGFnZXNbaV07CisKIAkJaWYgKHNob3VsZF9kaXJ0
eSkKIAkJCXNldF9wYWdlX2RpcnR5X2xvY2socGFnZSk7CiAJCXB1dF9wYWdlKHBhZ2UpOwpAQCAt
NjIxLDEyICs2MjksMTMgQEAgc3RhdGljIHZvaWQgZnVzZV9haW9fY29tcGxldGUoc3RydWN0IGZ1
c2VfaW9fcHJpdiAqaW8sIGludCBlcnIsIHNzaXplX3QgcG9zKQogCWtyZWZfcHV0KCZpby0+cmVm
Y250LCBmdXNlX2lvX3JlbGVhc2UpOwogfQogCi1zdGF0aWMgdm9pZCBmdXNlX2Fpb19jb21wbGV0
ZV9yZXEoc3RydWN0IGZ1c2VfY29ubiAqZmMsIHN0cnVjdCBmdXNlX3JlcSAqcmVxKQorc3RhdGlj
IHZvaWQgX2Z1c2VfYWlvX2NvbXBsZXRlX3JlcShzdHJ1Y3QgZnVzZV9jb25uICpmYywgc3RydWN0
IGZ1c2VfcmVxICpyZXEsCisJCQkJICAgYm9vbCBmcm9tX2d1cCkKIHsKIAlzdHJ1Y3QgZnVzZV9p
b19wcml2ICppbyA9IHJlcS0+aW87CiAJc3NpemVfdCBwb3MgPSAtMTsKIAotCWZ1c2VfcmVsZWFz
ZV91c2VyX3BhZ2VzKHJlcSwgaW8tPnNob3VsZF9kaXJ0eSk7CisJZnVzZV9yZWxlYXNlX3VzZXJf
cGFnZXMocmVxLCBpby0+c2hvdWxkX2RpcnR5LCBmcm9tX2d1cCk7CiAKIAlpZiAoaW8tPndyaXRl
KSB7CiAJCWlmIChyZXEtPm1pc2Mud3JpdGUuaW4uc2l6ZSAhPSByZXEtPm1pc2Mud3JpdGUub3V0
LnNpemUpCkBAIC02NDEsOCArNjUwLDE4IEBAIHN0YXRpYyB2b2lkIGZ1c2VfYWlvX2NvbXBsZXRl
X3JlcShzdHJ1Y3QgZnVzZV9jb25uICpmYywgc3RydWN0IGZ1c2VfcmVxICpyZXEpCiAJZnVzZV9h
aW9fY29tcGxldGUoaW8sIHJlcS0+b3V0LmguZXJyb3IsIHBvcyk7CiB9CiAKK3N0YXRpYyB2b2lk
IGZ1c2VfYWlvX2Zyb21fZ3VwX2NvbXBsZXRlX3JlcShzdHJ1Y3QgZnVzZV9jb25uICpmYywgc3Ry
dWN0IGZ1c2VfcmVxICpyZXEpCit7CisJX2Z1c2VfYWlvX2NvbXBsZXRlX3JlcShmYywgcmVxLCB0
cnVlKTsKK30KKworc3RhdGljIHZvaWQgZnVzZV9haW9fY29tcGxldGVfcmVxKHN0cnVjdCBmdXNl
X2Nvbm4gKmZjLCBzdHJ1Y3QgZnVzZV9yZXEgKnJlcSkKK3sKKwlfZnVzZV9haW9fY29tcGxldGVf
cmVxKGZjLCByZXEsIGZhbHNlKTsKK30KKwogc3RhdGljIHNpemVfdCBmdXNlX2FzeW5jX3JlcV9z
ZW5kKHN0cnVjdCBmdXNlX2Nvbm4gKmZjLCBzdHJ1Y3QgZnVzZV9yZXEgKnJlcSwKLQkJc2l6ZV90
IG51bV9ieXRlcywgc3RydWN0IGZ1c2VfaW9fcHJpdiAqaW8pCisJCXNpemVfdCBudW1fYnl0ZXMs
IHN0cnVjdCBmdXNlX2lvX3ByaXYgKmlvLCBib29sIGZyb21fZ3VwKQogewogCXNwaW5fbG9jaygm
aW8tPmxvY2spOwogCWtyZWZfZ2V0KCZpby0+cmVmY250KTsKQEAgLTY1MSw3ICs2NzAsOCBAQCBz
dGF0aWMgc2l6ZV90IGZ1c2VfYXN5bmNfcmVxX3NlbmQoc3RydWN0IGZ1c2VfY29ubiAqZmMsIHN0
cnVjdCBmdXNlX3JlcSAqcmVxLAogCXNwaW5fdW5sb2NrKCZpby0+bG9jayk7CiAKIAlyZXEtPmlv
ID0gaW87Ci0JcmVxLT5lbmQgPSBmdXNlX2Fpb19jb21wbGV0ZV9yZXE7CisJcmVxLT5lbmQgPSBm
cm9tX2d1cCA/IGZ1c2VfYWlvX2Zyb21fZ3VwX2NvbXBsZXRlX3JlcSA6CisJCSAgIGZ1c2VfYWlv
X2NvbXBsZXRlX3JlcTsKIAogCV9fZnVzZV9nZXRfcmVxdWVzdChyZXEpOwogCWZ1c2VfcmVxdWVz
dF9zZW5kX2JhY2tncm91bmQoZmMsIHJlcSk7CkBAIC02NjAsNyArNjgwLDggQEAgc3RhdGljIHNp
emVfdCBmdXNlX2FzeW5jX3JlcV9zZW5kKHN0cnVjdCBmdXNlX2Nvbm4gKmZjLCBzdHJ1Y3QgZnVz
ZV9yZXEgKnJlcSwKIH0KIAogc3RhdGljIHNpemVfdCBmdXNlX3NlbmRfcmVhZChzdHJ1Y3QgZnVz
ZV9yZXEgKnJlcSwgc3RydWN0IGZ1c2VfaW9fcHJpdiAqaW8sCi0JCQkgICAgIGxvZmZfdCBwb3Ms
IHNpemVfdCBjb3VudCwgZmxfb3duZXJfdCBvd25lcikKKwkJCSAgICAgbG9mZl90IHBvcywgc2l6
ZV90IGNvdW50LCBmbF9vd25lcl90IG93bmVyLAorCQkJICAgICBib29sIGZyb21fZ3VwKQogewog
CXN0cnVjdCBmaWxlICpmaWxlID0gaW8tPmlvY2ItPmtpX2ZpbHA7CiAJc3RydWN0IGZ1c2VfZmls
ZSAqZmYgPSBmaWxlLT5wcml2YXRlX2RhdGE7CkBAIC02NzUsNyArNjk2LDcgQEAgc3RhdGljIHNp
emVfdCBmdXNlX3NlbmRfcmVhZChzdHJ1Y3QgZnVzZV9yZXEgKnJlcSwgc3RydWN0IGZ1c2VfaW9f
cHJpdiAqaW8sCiAJfQogCiAJaWYgKGlvLT5hc3luYykKLQkJcmV0dXJuIGZ1c2VfYXN5bmNfcmVx
X3NlbmQoZmMsIHJlcSwgY291bnQsIGlvKTsKKwkJcmV0dXJuIGZ1c2VfYXN5bmNfcmVxX3NlbmQo
ZmMsIHJlcSwgY291bnQsIGlvLCBmcm9tX2d1cCk7CiAKIAlmdXNlX3JlcXVlc3Rfc2VuZChmYywg
cmVxKTsKIAlyZXR1cm4gcmVxLT5vdXQuYXJnc1swXS5zaXplOwpAQCAtNzU1LDcgKzc3Niw3IEBA
IHN0YXRpYyBpbnQgZnVzZV9kb19yZWFkcGFnZShzdHJ1Y3QgZmlsZSAqZmlsZSwgc3RydWN0IHBh
Z2UgKnBhZ2UpCiAJcmVxLT5wYWdlX2Rlc2NzWzBdLmxlbmd0aCA9IGNvdW50OwogCWluaXRfc3lu
Y19raW9jYigmaW9jYiwgZmlsZSk7CiAJaW8gPSAoc3RydWN0IGZ1c2VfaW9fcHJpdikgRlVTRV9J
T19QUklWX1NZTkMoJmlvY2IpOwotCW51bV9yZWFkID0gZnVzZV9zZW5kX3JlYWQocmVxLCAmaW8s
IHBvcywgY291bnQsIE5VTEwpOworCW51bV9yZWFkID0gZnVzZV9zZW5kX3JlYWQocmVxLCAmaW8s
IHBvcywgY291bnQsIE5VTEwsIGZhbHNlKTsKIAllcnIgPSByZXEtPm91dC5oLmVycm9yOwogCiAJ
aWYgKCFlcnIpIHsKQEAgLTk3Niw3ICs5OTcsOCBAQCBzdGF0aWMgdm9pZCBmdXNlX3dyaXRlX2Zp
bGwoc3RydWN0IGZ1c2VfcmVxICpyZXEsIHN0cnVjdCBmdXNlX2ZpbGUgKmZmLAogfQogCiBzdGF0
aWMgc2l6ZV90IGZ1c2Vfc2VuZF93cml0ZShzdHJ1Y3QgZnVzZV9yZXEgKnJlcSwgc3RydWN0IGZ1
c2VfaW9fcHJpdiAqaW8sCi0JCQkgICAgICBsb2ZmX3QgcG9zLCBzaXplX3QgY291bnQsIGZsX293
bmVyX3Qgb3duZXIpCisJCQkgICAgICBsb2ZmX3QgcG9zLCBzaXplX3QgY291bnQsIGZsX293bmVy
X3Qgb3duZXIsCisJCQkgICAgICBib29sIGZyb21fZ3VwKQogewogCXN0cnVjdCBraW9jYiAqaW9j
YiA9IGlvLT5pb2NiOwogCXN0cnVjdCBmaWxlICpmaWxlID0gaW9jYi0+a2lfZmlscDsKQEAgLTk5
Niw3ICsxMDE4LDcgQEAgc3RhdGljIHNpemVfdCBmdXNlX3NlbmRfd3JpdGUoc3RydWN0IGZ1c2Vf
cmVxICpyZXEsIHN0cnVjdCBmdXNlX2lvX3ByaXYgKmlvLAogCX0KIAogCWlmIChpby0+YXN5bmMp
Ci0JCXJldHVybiBmdXNlX2FzeW5jX3JlcV9zZW5kKGZjLCByZXEsIGNvdW50LCBpbyk7CisJCXJl
dHVybiBmdXNlX2FzeW5jX3JlcV9zZW5kKGZjLCByZXEsIGNvdW50LCBpbywgZnJvbV9ndXApOwog
CiAJZnVzZV9yZXF1ZXN0X3NlbmQoZmMsIHJlcSk7CiAJcmV0dXJuIHJlcS0+bWlzYy53cml0ZS5v
dXQuc2l6ZTsKQEAgLTEwMzEsNyArMTA1Myw3IEBAIHN0YXRpYyBzaXplX3QgZnVzZV9zZW5kX3dy
aXRlX3BhZ2VzKHN0cnVjdCBmdXNlX3JlcSAqcmVxLCBzdHJ1Y3Qga2lvY2IgKmlvY2IsCiAJZm9y
IChpID0gMDsgaSA8IHJlcS0+bnVtX3BhZ2VzOyBpKyspCiAJCWZ1c2Vfd2FpdF9vbl9wYWdlX3dy
aXRlYmFjayhpbm9kZSwgcmVxLT5wYWdlc1tpXS0+aW5kZXgpOwogCi0JcmVzID0gZnVzZV9zZW5k
X3dyaXRlKHJlcSwgJmlvLCBwb3MsIGNvdW50LCBOVUxMKTsKKwlyZXMgPSBmdXNlX3NlbmRfd3Jp
dGUocmVxLCAmaW8sIHBvcywgY291bnQsIE5VTEwsIGZhbHNlKTsKIAogCW9mZnNldCA9IHJlcS0+
cGFnZV9kZXNjc1swXS5vZmZzZXQ7CiAJY291bnQgPSByZXM7CkBAIC0xMzUxLDYgKzEzNzMsNyBA
QCBzc2l6ZV90IGZ1c2VfZGlyZWN0X2lvKHN0cnVjdCBmdXNlX2lvX3ByaXYgKmlvLCBzdHJ1Y3Qg
aW92X2l0ZXIgKml0ZXIsCiAJc3NpemVfdCByZXMgPSAwOwogCXN0cnVjdCBmdXNlX3JlcSAqcmVx
OwogCWludCBlcnIgPSAwOworCWJvb2wgZnJvbV9ndXAgPSBpb3ZfaXRlcl9nZXRfcGFnZXNfdXNl
X2d1cChpdGVyKTsKIAogCWlmIChpby0+YXN5bmMpCiAJCXJlcSA9IGZ1c2VfZ2V0X3JlcV9mb3Jf
YmFja2dyb3VuZChmYywgaW92X2l0ZXJfbnBhZ2VzKGl0ZXIsCkBAIC0xMzg0LDEzICsxNDA3LDE1
IEBAIHNzaXplX3QgZnVzZV9kaXJlY3RfaW8oc3RydWN0IGZ1c2VfaW9fcHJpdiAqaW8sIHN0cnVj
dCBpb3ZfaXRlciAqaXRlciwKIAkJCQlpbmFyZyA9ICZyZXEtPm1pc2Mud3JpdGUuaW47CiAJCQkJ
aW5hcmctPndyaXRlX2ZsYWdzIHw9IEZVU0VfV1JJVEVfS0lMTF9QUklWOwogCQkJfQotCQkJbnJl
cyA9IGZ1c2Vfc2VuZF93cml0ZShyZXEsIGlvLCBwb3MsIG5ieXRlcywgb3duZXIpOworCQkJbnJl
cyA9IGZ1c2Vfc2VuZF93cml0ZShyZXEsIGlvLCBwb3MsIG5ieXRlcywgb3duZXIsCisJCQkJCSAg
ICAgICBmcm9tX2d1cCk7CiAJCX0gZWxzZSB7Ci0JCQlucmVzID0gZnVzZV9zZW5kX3JlYWQocmVx
LCBpbywgcG9zLCBuYnl0ZXMsIG93bmVyKTsKKwkJCW5yZXMgPSBmdXNlX3NlbmRfcmVhZChyZXEs
IGlvLCBwb3MsIG5ieXRlcywgb3duZXIsCisJCQkJCSAgICAgIGZyb21fZ3VwKTsKIAkJfQogCiAJ
CWlmICghaW8tPmFzeW5jKQotCQkJZnVzZV9yZWxlYXNlX3VzZXJfcGFnZXMocmVxLCBpby0+c2hv
dWxkX2RpcnR5KTsKKwkJCWZ1c2VfcmVsZWFzZV91c2VyX3BhZ2VzKHJlcSwgaW8tPnNob3VsZF9k
aXJ0eSwgZnJvbV9ndXApOwogCQlpZiAocmVxLT5vdXQuaC5lcnJvcikgewogCQkJZXJyID0gcmVx
LT5vdXQuaC5lcnJvcjsKIAkJCWJyZWFrOwotLSAKMi4yMi4wCgoKCl9fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClY5ZnMtZGV2ZWxvcGVyIG1haWxpbmcgbGlz
dApWOWZzLWRldmVsb3BlckBsaXN0cy5zb3VyY2Vmb3JnZS5uZXQKaHR0cHM6Ly9saXN0cy5zb3Vy
Y2Vmb3JnZS5uZXQvbGlzdHMvbGlzdGluZm8vdjlmcy1kZXZlbG9wZXIK
